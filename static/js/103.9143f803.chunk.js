webpackJsonp([103],{1198:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=(n(227),n(228)),o=(n(138),n(139)),i=(n(167),n(168)),s=n(0),m=n.n(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),E=i.a.Link,p=function(e){function t(){var e,n,r,c;a(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.s="{",c=n,l(r,c)}return r(t,e),u(t,[{key:"render",value:function(){return m.a.createElement("div",null,m.a.createElement(c.a,null,m.a.createElement(o.a,{span:19},m.a.createElement("h2",{id:"Dubbo\u6e90\u7801\u7684\u7ed3\u6784\u6982\u8ff0"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"Dubbo\u6e90\u7801\u7684\u7ed3\u6784\u6982\u8ff0")),m.a.createElement("p",null,"\u53c2\u8003\uff1a",m.a.createElement("a",{href:"http://blog.csdn.net/zuoanyinxiang/article/details/51329982",target:"_blank"},"http://blog.csdn.net/zuoanyinxiang/article/details/51329982")),m.a.createElement("p",null,m.a.createElement("strong",null,"1.dubbo\u6e90\u7801\u7684\u7ed3\u6784")),m.a.createElement("p",null,m.a.createElement("img",{src:"http://img.blog.csdn.net/20160506110738015",alt:""})),m.a.createElement("p",null,m.a.createElement("img",{src:"http://img.blog.csdn.net/20160506111318351",alt:""})),m.a.createElement("p",null,m.a.createElement("strong",null,"Dubbo\u6e90\u6587\u4ef6\u4e3b\u8981\u5305\u542b\u4ee5\u4e0a\u8fd9\u4e48\u591a\u5305\uff0c\u5176\u4e2d\uff1a "),m.a.createElement("strong",null,"dubbo-common "),"\u516c\u5171\u903b\u8f91\u6a21\u5757\uff0c\u5305\u62ecUtil\u7c7b\u548c\u901a\u7528\u6a21\u578b\u3002",m.a.createElement("strong",null,"dubbo-remoting ")," \u8fdc\u7a0b\u901a\u8baf\u6a21\u5757\uff0c\u76f8\u5f53\u4e8eDubbo\u534f\u8bae\u7684\u5b9e\u73b0\uff0c\u5982\u679cRPC\u7528RMI\u534f\u8bae\u5219\u4e0d\u9700\u8981\u4f7f\u7528\u6b64\u5305\u3002",m.a.createElement("strong",null,"dubbo-rpc")," \u8fdc\u7a0b\u8c03\u7528\u6a21\u5757\uff0c\u62bd\u8c61\u5404\u79cd\u534f\u8bae\uff0c\u4ee5\u53ca\u52a8\u6001\u4ee3\u7406\uff0c\u53ea\u5305\u542b\u4e00\u5bf9\u4e00\u7684\u8c03\u7528\uff0c\u4e0d\u5173\u5fc3\u96c6\u7fa4\u7684\u7ba1\u7406\u3002",m.a.createElement("strong",null,"dubbo-cluster "),"\u96c6\u7fa4\u6a21\u5757\uff0c\u5c06\u591a\u4e2a\u670d\u52a1\u63d0\u4f9b\u65b9\u4f2a\u88c5\u4e3a\u4e00\u4e2a\u63d0\u4f9b\u65b9\uff0c\u5305\u62ec\uff1a\u8d1f\u8f7d\u5747\u8861, \u5bb9\u9519\uff0c\u8def\u7531\u7b49\uff0c\u96c6\u7fa4\u7684\u5730\u5740\u5217\u8868\u53ef\u4ee5\u662f\u9759\u6001\u914d\u7f6e\u7684\uff0c\u4e5f\u53ef\u4ee5\u662f\u7531\u6ce8\u518c\u4e2d\u5fc3\u4e0b\u53d1\u3002",m.a.createElement("strong",null,"dubbo-registry")," \u6ce8\u518c\u4e2d\u5fc3\u6a21\u5757\uff0c\u57fa\u4e8e\u6ce8\u518c\u4e2d\u5fc3\u4e0b\u53d1\u5730\u5740\u7684\u96c6\u7fa4\u65b9\u5f0f\uff0c\u4ee5\u53ca\u5bf9\u5404\u79cd\u6ce8\u518c\u4e2d\u5fc3\u7684\u62bd\u8c61\u3002",m.a.createElement("strong",null,"dubbo-monitor"),"  \u76d1\u63a7\u6a21\u5757\uff0c\u7edf\u8ba1\u670d\u52a1\u8c03\u7528\u6b21\u6570\uff0c\u8c03\u7528\u65f6\u95f4\u7684\uff0c\u8c03\u7528\u94fe\u8ddf\u8e2a\u7684\u670d\u52a1\u3002",m.a.createElement("strong",null,"dubbo-config"),"\u914d\u7f6e\u6a21\u5757\uff0c\u662fDubbo\u5bf9\u5916\u7684API\uff0c\u7528\u6237\u901a\u8fc7Config\u4f7f\u7528Dubbo\uff0c\u9690\u85cfDubbo\u6240\u6709\u7ec6\u8282\u3002",m.a.createElement("strong",null,"dubbo-container")," \u5bb9\u5668\u6a21\u5757\uff0c\u662f\u4e00\u4e2aStandlone\u7684\u5bb9\u5668\uff0c\u4ee5\u7b80\u5355\u7684Main\u52a0\u8f7dSpring\u542f\u52a8\uff0c\u56e0\u4e3a\u670d\u52a1\u901a\u5e38\u4e0d\u9700\u8981Tomcat/JBoss\u7b49Web\u5bb9\u5668\u7684\u7279\u6027\uff0c\u6ca1\u5fc5\u8981\u7528Web\u5bb9\u5668\u53bb\u52a0\u8f7d\u670d\u52a1\u3002 "),m.a.createElement("p",null,"\xa0"),m.a.createElement("p",null,m.a.createElement("strong",null,"\u6574\u4f53\u4e0a\u6309\u7167\u5206\u5c42\u7ed3\u6784\u8fdb\u884c\u5206\u5305\uff0c\u4e0e\u5206\u5c42\u7684\u4e0d\u540c\u70b9\u5728\u4e8e\uff1a ")),m.a.createElement("pre",null,m.a.createElement("code",null,"container\u4e3a\u670d\u52a1\u5bb9\u5668\uff0c\u7528\u4e8e\u90e8\u7f72\u8fd0\u884c\u670d\u52a1\uff0c\u6ca1\u6709\u5728\u5c42\u4e2d\u753b\u51fa\u3002 ",m.a.createElement("br",null),"protocol\u5c42\u548cproxy\u5c42\u90fd\u653e\u5728rpc\u6a21\u5757\u4e2d\uff0c\u8fd9\u4e24\u5c42\u662frpc\u7684\u6838\u5fc3\uff0c\u5728\u4e0d\u9700\u8981\u96c6\u7fa4\u65f6(\u53ea\u6709\u4e00\u4e2a\u63d0\u4f9b\u8005)\uff0c\u53ef\u4ee5\u53ea\u4f7f\u7528\u8fd9\u4e24\u5c42\u5b8c\u6210rpc\u8c03\u7528\u3002\xa0",m.a.createElement("br",null),"transport\u5c42\u548cexchange\u5c42\u90fd\u653e\u5728remoting\u6a21\u5757\u4e2d\uff0c\u4e3arpc\u8c03\u7528\u7684\u901a\u8baf\u57fa\u7840\u3002\xa0",m.a.createElement("br",null),"serialize\u5c42\u653e\u5728common\u6a21\u5757\u4e2d\uff0c\u4ee5\u4fbf\u66f4\u5927\u7a0b\u5ea6\u590d\u7528\u3002\xa0",m.a.createElement("br",null))),m.a.createElement("p",null,"\u4e0b\u9762\u662f\u66f4\u8be6\u7ec6\u7684Project\u5173\u7cfb\u56fe\uff0c\u4f9d\u8d56\u5173\u7cfb\u7ebf\u6709\u70b9\u4e71\u3002\u6574\u4e2a\u6a21\u5757\u662f\u4ece\u4e0a\u5230\u4e0b\u4f20\u9012\u4f9d\u8d56\u7684\u3002"),m.a.createElement("p",null,m.a.createElement("img",{src:"http://img.blog.csdn.net/20160506114114762",alt:""})),m.a.createElement("p",null,"\xa0"),m.a.createElement("h2",{id:"\u8bbe\u8ba1\u7bc7"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"\u8bbe\u8ba1\u7bc7")),m.a.createElement("h3",{id:"\u81ea\u5b9a\u4e49\u914d\u7f6e\u652f\u6301"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"\u81ea\u5b9a\u4e49\u914d\u7f6e\u652f\u6301")),m.a.createElement("p",null,"\u57fa\u4e8eSpring\u53ef\u6269\u5c55Schema\u63d0\u4f9b\u81ea\u5b9a\u4e49\u914d\u7f6e\u652f\u6301(spring\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\u6807\u7b7e\u652f\u6301),\u5728\u5f88\u591a\u60c5\u51b5\u4e0b,\u6211\u4eec\u9700\u8981\u4e3a\u7cfb\u7edf\u63d0\u4f9b\u53ef\u914d\u7f6e\u5316\u652f\u6301,\u7b80\u5355\u7684\u505a\u6cd5\u53ef\u4ee5\u76f4\u63a5\u57fa\u4e8eSpring\u7684\u6807\u51c6Bean\u6765\u914d\u7f6e,\u4f46\u914d\u7f6e\u8f83\u4e3a\u590d\u6742\u6216\u8005\u9700\u8981\u66f4\u591a\u4e30\u5bcc\u63a7\u5236\u7684\u65f6\u5019,\u4f1a\u663e\u5f97\u975e\u5e38\u7b28\u62d9\u3002\u4e00\u822c\u7684\u505a\u6cd5\u4f1a\u7528\u539f\u751f\u6001\u7684\u65b9\u5f0f\u53bb\u89e3\u6790\u5b9a\u4e49\u597d\u7684xml\u6587\u4ef6,\u7136\u540e\u8f6c\u5316\u4e3a\u914d\u7f6e\u5bf9\u8c61,\u8fd9\u79cd\u65b9\u5f0f\u5f53\u7136\u53ef\u4ee5\u89e3\u51b3\u6240\u6709\u95ee\u9898,\u4f46\u5b9e\u73b0\u8d77\u6765\u6bd4\u8f83\u7e41\u7410,\u7279\u522b\u662f\u662f\u5728\u914d\u7f6e\u975e\u5e38\u590d\u6742\u7684\u65f6\u5019,\u89e3\u6790\u5de5\u4f5c\u662f\u4e00\u4e2a\u4e0d\u5f97\u4e0d\u8003\u8651\u7684\u8d1f\u62c5\u3002Spring\u63d0\u4f9b\u4e86\u53ef\u6269\u5c55Schema\u7684\u652f\u6301,\u8fd9\u662f\u4e00\u4e2a\u4e0d\u9519\u7684\u6298\u4e2d\u65b9\u6848,\u5b8c\u6210\u4e00\u4e2a\u81ea\u5b9a\u4e49\u914d\u7f6e\u4e00\u822c\u9700\u8981\u4ee5\u4e0b\u6b65\u9aa4\uff1a"),m.a.createElement("p",null,"1\u3001\u7f16\u5199\u4e00\u4e2aJavaBean 2\u3001\u7f16\u5199XSD\u6587\u4ef6 3\u3001\u7f16\u5199NamespaceHandler\u548cBeanDefinitionParser\u5b8c\u6210\u89e3\u6790\u5de5\u4f5c 4\u3001\u7f16\u5199spring.handlers\u548cspring.schemas\u4e32\u8054\u8d77\u6240\u6709\u90e8\u4ef6 5\u3001\u5b9a\u4e49beans.xml"),m.a.createElement("p",null,"\xa0"),m.a.createElement("p",null,"\u4e0b\u9762\u4e3e\u4e2a\u4f8b\u5b50"),m.a.createElement("p",null,"1)\u521b\u5efaJavaBean"),m.a.createElement("p",null,"\u9996\u5148\u8bbe\u8ba1\u597d\u914d\u7f6e\u9879,\u901a\u8fc7JavaBean\u6765\u5efa\u6a21,\u5982\u7c7bPeople"),m.a.createElement("pre",null,m.a.createElement("code",null,"public class People ",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0private\xa0String\xa0name;\xa0",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0private\xa0Integer\xa0age;",m.a.createElement("br",null),"}",m.a.createElement("br",null))),m.a.createElement("p",null,"2)\u7f16\u5199XSD\u6587\u4ef6"),m.a.createElement("p",null,"XSD\u6587\u4ef6\u662fXML\u7684\u7ed3\u6784\u5316\u5b9a\u4e49,Spring\u63d0\u4f9b\u4e86\u53ef\u6269\u5c55\u7684XSD,\u4e3a\u4e0a\u4e00\u6b65\u8bbe\u8ba1\u597d\u7684\u914d\u7f6e\u9879\u7f16\u5199XSD\u6587\u4ef6,people.xsd\u6587\u4ef6\u5982\u4e0b\uff1a"),m.a.createElement("pre",null,m.a.createElement("code",null,'<?xml version="1.0" encoding="UTF-8"?>',m.a.createElement("br",null),"<xsd:schema",m.a.createElement("br",null),'xmlns="http://blog.csdn.net/cutesource/schema/people"',m.a.createElement("br",null),'\xa0\xa0\xa0\xa0xmlns:xsd="http://www.w3.org/2001/XMLSchema"\xa0 ',m.a.createElement("br",null),'\xa0\xa0\xa0\xa0xmlns:beans="http://www.springframework.org/schema/beans"\xa0\xa0\xa0',m.a.createElement("br",null),'\xa0\xa0\xa0\xa0targetNamespace="http://blog.csdn.net/418517226/schema/people">',m.a.createElement("br",null),'<xsd:import\xa0namespace="http://www.springframework.org/schema/beans"\xa0/>',m.a.createElement("br",null),m.a.createElement("br",null),'\xa0\xa0<xsd:element\xa0name="people">',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0<xsd:complexType>",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0<xsd:complexContent>",m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0<xsd:extension\xa0base="beans:identifiedType">',m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0<xsd:attribute\xa0name="name"\xa0type="xsd:string"\xa0/>',m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0<xsd:attribute\xa0name="age"\xa0type="xsd:int"\xa0/>',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0</xsd:extension>",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0</xsd:complexContent>",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0</xsd:complexType>",m.a.createElement("br",null),"\xa0\xa0</xsd:element>",m.a.createElement("br",null),"</xsd:schema>",m.a.createElement("br",null))),m.a.createElement("p",null,'<xsd:element name="people">\u5bf9\u5e94\u7740\u914d\u7f6e\u9879\u8282\u70b9\u7684\u540d\u79f0,\u56e0\u6b64\u5728\u5e94\u7528\u4e2d\u4f1a\u7528people\u4f5c\u4e3a\u8282\u70b9\u540d\u6765\u5f15\u7528\u8fd9\u4e2a\u914d\u7f6e'),m.a.createElement("p",null,'<xsd:attribute name="name" type="xsd:string" />\u548c<xsd:attribute name="age" type="xsd:int" />\u5bf9\u5e94\u7740\u914d\u7f6e\u9879people\u7684\u4e24\u4e2a\u5c5e\u6027\u540d,\u56e0\u6b64\u5728\u5e94\u7528\u4e2d\u53ef\u4ee5\u914d\u7f6ename\u548cage\u4e24\u4e2a\u5c5e\u6027,\u5206\u522b\u662fstring\u548cint\u7c7b\u578b\u3002'),m.a.createElement("p",null,"\u5b8c\u6210\u540e\u9700\u628axsd\u6587\u4ef6\u653e\u5728classpath\u4e0b,\u4e00\u822c\u90fd\u653e\u5728META-INF\u76ee\u5f55\u4e0b"),m.a.createElement("p",null,"\u5173\u4e8exsd:schema\u7684\u5404\u4e2a\u5c5e\u6027\u5177\u4f53\u542b\u4e49",m.a.createElement("a",{href:"http://www.w3school.com.cn/schema/schema_schema.asp",target:"_blank"},"http://www.w3school.com.cn/schema/schema_schema.asp")),m.a.createElement("p",null,"\xa0"),m.a.createElement("p",null,"3)\u7f16\u5199NamespaceHandler\u548cBeanDefinitionParser\u5b8c\u6210\u89e3\u6790\u5de5\u4f5c"),m.a.createElement("p",null,"NamespaceHandler\u6839\u636eXSD\u6587\u4ef6\u5177\u4f53\u7684element\u627e\u5230\u67d0\u4e2aBeanDefinitionParser,\u7136\u540e\u7531BeanDefinitionParser\u5b8c\u6210\u5177\u4f53\u7684\u89e3\u6790\u5de5\u4f5c\u3002\u56e0\u6b64\u9700\u8981\u5206\u522b\u5b8c\u6210 NamespaceHandler \u548c BeanDefinitionParser \u7684\u5b9e\u73b0\u7c7b,Spring\u63d0\u4f9b\u53ef\u9ed8\u8ba4\u5b9e\u73b0\u7c7b NamespaceHandlerSupport \u548cAbstractSingleBeanDefinitionParser,\u7b80\u5355\u7684\u65b9\u5f0f\u5c31\u662f\u53bb\u7ee7\u627f\u8fd9\u4e24\u4e2a\u7c7b,\u5982\u4e0b\uff1a"),m.a.createElement("pre",null,m.a.createElement("code",null,"public class MyNamespaceHandler extendsNamespaceHandlerSupport ",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0public\xa0void\xa0init()\xa0",this.s,m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0registerBeanDefinitionParser("people",\xa0newPeopleBeanDefinitionParser());',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0//people\u662f\u4e00\u4e2aelement",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"}",m.a.createElement("br",null))),m.a.createElement("p",null,"\u5176\u4e2dregisterBeanDefinitionParser(\u201cpeople\u201d, new PeopleBeanDefinitionParser()),\u5c31\u662f\u7528\u6765\u628aelement\u548c\u89e3\u6790\u7c7b\u8054\u7cfb\u8d77\u6765,\u5177\u4f53\u770b\u4e0b\u7c7bPeopleBeanDefinitionParser\uff1a"),m.a.createElement("pre",null,m.a.createElement("code",null,"public class PeopleBeanDefinitionParser extendsAbstractSingleBeanDefinitionParser ",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0protected\xa0Class\xa0getBeanClass(Element\xa0element)\xa0",this.s,"\xa0return\xa0People.class;}",m.a.createElement("br",null),"\xa0\xa0\xa0protected\xa0void\xa0doParse(Element\xa0element,\xa0BeanDefinitionBuilder\xa0bean)\xa0",this.s,m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0String\xa0name=element.getAttribute("name");\xa0',m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0String\xa0age\xa0=\xa0element.getAttribute("age");',m.a.createElement("br",null),"\xa0\xa0\xa0if\xa0(StringUtils.hasText(name))\xa0",this.s,"\xa0\xa0\xa0",m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0bean.addPropertyValue("name",\xa0name);',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0if\xa0(StringUtils.hasText(age))\xa0",this.s,"\xa0\xa0",m.a.createElement("br",null),'bean.addPropertyValue("age",\xa0\xa0Integer.valueOf(age))',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"\xa0\xa0\xa0}",m.a.createElement("br",null),"}",m.a.createElement("br",null))),m.a.createElement("p",null,"4)\u7f16\u5199 spring.handlers \u548c spring.schemas \u4e32\u8054\u8d77\u6240\u6709\u90e8\u4ef6"),m.a.createElement("p",null,"\u5230\u76ee\u524d\u4e3a\u6b62,NamespaceHandler \u4e0e xsd\u6587\u4ef6\u8fd8\u6ca1\u6709\u8054\u7cfb,spring\u63d0\u4f9b\u4e86spring.handlers \u548c spring.schemas \u8fd9\u4e24\u4e2a\u914d\u7f6e\u6587\u4ef6\u6765\u5b8c\u6210\u8fd9\u9879\u5de5\u4f5c,\u8fd9\u4e24\u4e2a\u6587\u4ef6\u9700\u8981\u6211\u4eec\u81ea\u5df1\u7f16\u5199\u5e76\u653e\u5165 META-INF \u6587\u4ef6\u5939\u4e2d, \u8fd9\u4e24\u4e2a\u6587\u4ef6\u7684\u5730\u5740\u5fc5\u987b\u662f META-INF/spring.handlers \u548c META-INF/spring.schemas,spring\u4f1a\u9ed8\u8ba4\u53bb\u8f7d\u5165\u5b83\u4eec\u3002"),m.a.createElement("p",null,"\u4e0b\u9762\u662fspring.handlers\u91cc\u9762\u7684\u5185\u5bb9\uff1a"),m.a.createElement("p",null,'http\\://blog.csdn.net/cutesource/schema/people=xxx.xxx.MyNamespaceHandle\u4ee5\u4e0a\u8868\u793a\u5f53\u4f7f\u7528\u5230\u540d\u4e3a"',m.a.createElement("a",{href:"http://blog.csdn.net/cutesource/schema/people",target:"_blank"},"http://blog.csdn.net/cutesource/schema/people"),'"\u7684schema\u5f15\u7528\u65f6,\u4f1a\u901a\u8fc7xxx.xxx.MyNamespaceHandler\u6765\u5b8c\u6210\u89e3\u6790'),m.a.createElement("p",null,"\u4e0b\u9762\u662fspring.schemas\uff1a"),m.a.createElement("p",null," http\\://blog.csdn.net/cutesource/schema/people.xsd=META-INF/people.xsd"),m.a.createElement("p",null,"\u5b83\u8868\u793a\u8f7d\u5165xsd\u6587\u4ef6\u7684\u5730\u5740\u3002"),m.a.createElement("p",null,"5)\u5b9a\u4e49beans.xml"),m.a.createElement("p",null,"\u4f7f\u7528\u65b9\u6cd5\u548c\u914d\u7f6e\u4e00\u4e2a\u666e\u901a\u7684bean \u7c7b\u4f3c,\u53ea\u4e0d\u8fc7\u9700\u8981\u57fa\u4e8e\u6211\u4eec\u81ea\u5b9a\u4e49schema,\u5982\u4e0b\uff1a"),m.a.createElement("pre",null,m.a.createElement("code",null,'<beans xmlns="http://www.springframework.org/schema/beans"',m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"',m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0xmlns:cutesource="http://blog.csdn.net/cutesource/schema/people"',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0//schema\u5f15\u7528,cutesource\u4e3a\u6807\u7b7e\u5934",m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0xsi:schemaLocation="\xa0\xa0',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0http://www.springframework.org/schema/beans\xa0",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\xa0\xa0",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0http://blog.csdn.net/cutesource/schema/people\xa0",m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0http://blog.csdn.net/cutesource/schema/people.xsd">',m.a.createElement("br",null),'\xa0\xa0\xa0\xa0<cutesource:people\xa0id="cutesource"\xa0name="svg"\xa0age="27"/>',m.a.createElement("br",null),"</beans>",m.a.createElement("br",null))),m.a.createElement("p",null,"\u6700\u540e\u5c31\u53ef\u4ee5\u5728\u5177\u4f53\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u57fa\u672c\u7684bean\u8f7d\u5165\u65b9\u5f0f\u6765\u8f7d\u5165\u6211\u4eec\u7684\u81ea\u5b9a\u4e49\u914d\u7f6e\u5bf9\u8c61\u4e86,\u5982"),m.a.createElement("pre",null,m.a.createElement("code",null,'ApplicationContext ctx = new ClassPathXmlApplicationContext("beans.xml");  ',m.a.createElement("br",null),'People\xa0p\xa0=\xa0(People)ctx.getBean("cutesource");\xa0\xa0',m.a.createElement("br",null),"System.out.println(p.getId());\xa0\xa0",m.a.createElement("br",null),"System.out.println(p.getName());\xa0\xa0",m.a.createElement("br",null),"System.out.println(p.getAge());\xa0",m.a.createElement("br",null))),m.a.createElement("h3",{id:"Dubbo bean\u7684\u52a0\u8f7d"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"Dubbo bean\u7684\u52a0\u8f7d")),m.a.createElement("p",null,"\u4ece\u4e0a\u4e00\u8282\u300a\u81ea\u5b9a\u4e49\u914d\u7f6e\u652f\u6301\u300b\u5927\u6977\u80fd\u731c\u5230dubbo bean\u7684\u52a0\u8f7d\u8fc7\u7a0b,\u8fd9\u662f\u4e00\u6bb5\u670d\u52a1\u63d0\u4f9b\u8005\u7684\u914d\u7f6e\u7247\u6bb5\u3002"),m.a.createElement("p",null,"\u5728\u4e00\u4e2a"),m.a.createElement("pre",null,m.a.createElement("code",null,'<?xml version="1.0" encoding="UTF-8"?>',m.a.createElement("br",null),'<beans\xa0xmlns="http://www.springframework.org/schema/beans"',m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"',m.a.createElement("br",null),'\xa0xmlns:dubbo="http://code.alibabatech.com/schema/dubbo"',m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0xsi:schemaLocation=...">',m.a.createElement("br",null),'<dubbo:service\xa0interface="com.lianlianpay.lli.entry.client.service.EntryChannelService"\xa0ref="entryChannelService"\xa0timeout="30000"\xa0/>',m.a.createElement("br",null),"</beans>",m.a.createElement("br",null))),m.a.createElement("p",null,"\u5728dubbo-2.5.3.jar\u52a0\u8f7d\u540e,spring\u4f1a\u8f7d\u5165\u5176\u4e2d\u7684META-INF/spring.handlers \u548c META-INF/spring.schemas\u6587\u4ef6,\u91cc\u9762\u8bb0\u5f55\u4e86xmlns:dubbo\u7684\u89e3\u6790hander\u4e3acom.alibaba.dubbo.config.spring.schema.DubboNamespaceHandler,spring.schemas\u8bb0\u5f55\u4e86\u5bf9\u5e94\u7684schema\u89e3\u6790\u9690\u5c04\u6587\u4ef6dubbo.xsd\u3002"),m.a.createElement("pre",null,m.a.createElement("code",null,"xxdeMacBook-Pro:META-INF xx$ ls",m.a.createElement("br",null),"INDEX.LIST MANIFEST.MF assembly dubbo  dubbo.xsd maven  spring.handlers spring.schemas",m.a.createElement("br",null))),m.a.createElement("p",null,"dubbo.xsd\u8bb0\u5f55\u4e86\u5404\u79cd\u6807\u7b7e\u5bf9\u5e94\u7684\u5b9a\u4e49\u5c5e\u6027\uff1b"),m.a.createElement("p",null,"spring.handlers\u7684\u5185\u5bb9\uff1a"),m.a.createElement("pre",null,m.a.createElement("code",null,"$ cat spring.handlers ",m.a.createElement("br",null),"http\\://code.alibabatech.com/schema/dubbo=com.alibaba.dubbo.config.spring.schema.DubboNamespaceHandler",m.a.createElement("br",null))),m.a.createElement("h3",{id:"NamespaceHandler"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"NamespaceHandler")),m.a.createElement("pre",null,m.a.createElement("code",null,"com.alibaba.dubbo.config.spring.schema.DubboNamespaceHandler",m.a.createElement("br",null),"public\xa0class\xa0DubboNamespaceHandler\xa0extends\xa0NamespaceHandlerSupport\xa0",this.s,"\xa0\xa0",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0public\xa0void\xa0init()\xa0",this.s,"\xa0\xa0",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0//\u914d\u7f6e<dubbo:application>\u6807\u7b7e\u89e3\u6790\u5668",m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0registerBeanDefinitionParser("application",\xa0new\xa0DubboBeanDefinitionParser(ApplicationConfig.class,\xa0true));\xa0\xa0',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0//\u914d\u7f6e<dubbo:module>\u6807\u7b7e\u89e3\u6790\u5668",m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0registerBeanDefinitionParser("module",\xa0new\xa0DubboBeanDefinitionParser(ModuleConfig.class,\xa0true));\xa0\xa0',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0//\u914d\u7f6e<dubbo:registry>\u6807\u7b7e\u89e3\u6790\u5668",m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0registerBeanDefinitionParser("registry",\xa0new\xa0DubboBeanDefinitionParser(RegistryConfig.class,\xa0true));\xa0\xa0',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0//\u914d\u7f6e<dubbo:monitor>\u6807\u7b7e\u89e3\u6790\u5668",m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0registerBeanDefinitionParser("monitor",\xa0new\xa0DubboBeanDefinitionParser(MonitorConfig.class,\xa0true));\xa0\xa0',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0//\u914d\u7f6e<dubbo:provider>\u6807\u7b7e\u89e3\u6790\u5668",m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0registerBeanDefinitionParser("provider",\xa0new\xa0DubboBeanDefinitionParser(ProviderConfig.class,\xa0true));\xa0\xa0',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0//\u914d\u7f6e<dubbo:consumer>\u6807\u7b7e\u89e3\u6790\u5668",m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0registerBeanDefinitionParser("consumer",\xa0new\xa0DubboBeanDefinitionParser(ConsumerConfig.class,\xa0true));\xa0\xa0',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0//\u914d\u7f6e<dubbo:protocol>\u6807\u7b7e\u89e3\u6790\u5668",m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0registerBeanDefinitionParser("protocol",\xa0new\xa0DubboBeanDefinitionParser(ProtocolConfig.class,\xa0true));\xa0\xa0',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0//\u914d\u7f6e<dubbo:service>\u6807\u7b7e\u89e3\u6790\u5668",m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0registerBeanDefinitionParser("service",\xa0new\xa0DubboBeanDefinitionParser(ServiceBean.class,\xa0true));\xa0\xa0',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0//\u914d\u7f6e<dubbo:refenrence>\u6807\u7b7e\u89e3\u6790\u5668",m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0registerBeanDefinitionParser("reference",\xa0new\xa0DubboBeanDefinitionParser(ReferenceBean.class,\xa0false));\xa0\xa0',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0//\u914d\u7f6e<dubbo:annotation>\u6807\u7b7e\u89e3\u6790\u5668",m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0registerBeanDefinitionParser("annotation",\xa0new\xa0DubboBeanDefinitionParser(AnnotationBean.class,\xa0true));\xa0\xa0',m.a.createElement("br",null),"\xa0\xa0\xa0\xa0}\xa0\xa0",m.a.createElement("br",null),"\xa0}",m.a.createElement("br",null))),m.a.createElement("p",null,"\u4ece\u8fd9\u91cc\u4e5f\u53ef\u4ee5\u770b\u5230,\u5bf9\u5e94\u7684\u652f\u6301\u7684\u6807\u7b7e\u5176\u5b9e\u4e0d\u591a\u3002\u6240\u6709\u7684 Config \u90fd\u5c01\u88c5\u5230\u4e86DubboBeanDefinitionParser \u4e2d\u3002\u5bf9\u5e94\u7684 class,\u5c31\u662f\u4f20\u5165\u7684 beanClass\u3002\u6bd4\u5982 application \u7684\u5c31\u662fApplicationConfig\u3002 module \u7684\u5c31\u662f ModuleConfig\u3002\u7ecf\u8fc7 Parser \u7684\u8f6c\u6362,provider.xml \u4e2d\u7684\u914d\u7f6e\u5c31\u53d8\u6210\u53ef\u4ee5\u88ab\u4f7f\u7528\u7684bean\u4e86\u3002"),m.a.createElement("h3",{id:"DubboBeanDefinitionParser"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"DubboBeanDefinitionParser")),m.a.createElement("pre",null,m.a.createElement("code",null,"public class DubboBeanDefinitionParser implements BeanDefinitionParser ",this.s,m.a.createElement("br",null))),m.a.createElement("h2",{id:"Dubbo\u5185\u6838\u5b9e\u73b0\u4e4bSPI"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"Dubbo\u5185\u6838\u5b9e\u73b0\u4e4bSPI")),m.a.createElement("p",null,"  Dubbo\u91c7\u7528\u5fae\u5185\u6838+\u63d2\u4ef6\u4f53\u7cfb,\u4f7f\u5f97\u8bbe\u8ba1\u4f18\u96c5,\u6269\u5c55\u6027\u5f3a\u3002\u90a3\u6240\u8c13\u7684\u5fae\u5185\u6838+\u63d2\u4ef6\u4f53\u7cfb\u662f\u5982\u4f55\u5b9e\u73b0\u7684\u5462\uff01\u5927\u5bb6\u662f\u5426\u719f\u6089spi(service  provider interface)\u673a\u5236,\u5373\u6211\u4eec\u5b9a\u4e49\u4e86\u670d\u52a1\u63a5\u53e3\u6807\u51c6, jdk\u901a\u8fc7ServiceLoader\u7c7b\u5b9e\u73b0spi\u673a\u5236\u7684\u670d\u52a1\u67e5\u627e\u529f\u80fd\u3002"),m.a.createElement("h3",{id:"ServiceLoader"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"ServiceLoader")),m.a.createElement("p",null,"\u793a\u4f8b\uff0c\u9996\u5148\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3\uff1a"),m.a.createElement("pre",null,m.a.createElement("code",null,"package com.example;  ",m.a.createElement("br",null),"public\xa0interface\xa0Spi\xa0",this.s,"\xa0\xa0",m.a.createElement("br",null),"\xa0\xa0\xa0String\xa0sayHello();\xa0\xa0",m.a.createElement("br",null),"}",m.a.createElement("br",null))),m.a.createElement("p",null,"ServiceLoader\u4f1a\u904d\u5386\u6240\u6709jar\u67e5\u627eMETA-INF/services/com.example.Spi\u6587\u4ef6,\u6700\u540e\u9762\u5c31\u662f pacckage.interface\u7684\u547d\u540d\u3002"),m.a.createElement("p",null,"A\u5382\u5546\u63d0\u4f9b\u5b9e\u73b0:"),m.a.createElement("pre",null,m.a.createElement("code",null,"package com.a.example;  ",m.a.createElement("br",null),"public\xa0class\xa0SpiAImpl\xa0implements\xa0Spi\xa0",this.s,"\xa0\xa0",m.a.createElement("br",null),"public\xa0String\xa0syaHello()\xa0",this.s,"\xa0\xa0",m.a.createElement("br",null),'return\xa0"hello\xa0A"\xa0;',m.a.createElement("br",null))),m.a.createElement("p",null,"\u5728A\u5382\u5546\u63d0\u4f9b\u7684a.jar\u5305\u4e2d\u7684META-INF/services/com.example.Spi\u6587\u4ef6\u5185\u5bb9\u4e3a\uff1a"),m.a.createElement("pre",null,m.a.createElement("code",null,"com.a.example.SpiAImpl        #\u5382\u5546A\u7684spi\u5b9e\u73b0\u5168\u8def\u5f84\u7c7b\u540d",m.a.createElement("br",null))),m.a.createElement("p",null,"B\u5382\u5546\u63d0\u4f9b\u5b9e\u73b0:"),m.a.createElement("pre",null,m.a.createElement("code",null,"public class SpiBImpl implements Spi ",this.s,"  ",m.a.createElement("br",null),"public\xa0String\xa0syaHello()\xa0",this.s,"\xa0\xa0",m.a.createElement("br",null),'return\xa0"hello\xa0B";\xa0\xa0',m.a.createElement("br",null),"}\xa0\xa0",m.a.createElement("br",null),"}",m.a.createElement("br",null))),m.a.createElement("p",null,"\u5728B\u5382\u5546\u63d0\u4f9b\u7684b.jar\u5305\u4e2d\u7684META-INF/services/com.example.Spi\u6587\u4ef6\u5185\u5bb9\u4e3a\uff1a"),m.a.createElement("pre",null,m.a.createElement("code",null,"com.a.example.SpiBImpl        #\u5382\u5546B\u7684spi\u5b9e\u73b0\u5168\u8def\u5f84\u7c7b\u540d",m.a.createElement("br",null))),m.a.createElement("p",null,"ServiceLoader.load(Spi.class)\u8bfb\u53d6\u5382\u5546A\u3001B\u63d0\u4f9bjar\u5305\u4e2d\u7684\u6587\u4ef6,ServiceLoader\u5b9e\u73b0\u4e86Iterable\u63a5\u53e3\u53ef\u901a\u8fc7while for\u5faa\u73af\u8bed\u53e5\u904d\u5386\u51fa\u6240\u6709\u5b9e\u73b0\u3002"),m.a.createElement("p",null,"       \u6ce8,\u53ef\u4ee5\u5728\u540c\u4e00\u4e2acom.example.Spi\u4e2d\u5199\u5165\u591a\u884c\u5b9e\u73b0,\u6548\u679c\u548cIterable\u4e00\u6837"),m.a.createElement("p",null,m.a.createElement("img",{src:"https://gitee.com/nick070809/pics/raw/master/dubbo/1.png",alt:""})),m.a.createElement("p",null,m.a.createElement("strong",null,"@SPI")),m.a.createElement("p",null,"\u5728dubbo\u4ee3\u7801\u4e2d\u968f\u5904\u53ef\u89c1@spi\u6ce8\u89e3,spi\u6ce8\u89e3\u662f\u5bf9java spi\u7684\u4e00\u79cd\u6269\u5c55,\u4f7f\u5f97\u539f\u6765\u53ea\u652f\u6301META-INF/services\u76ee\u5f55\u4e0b\u7684\u63a5\u53e3\u5b9a\u4e49\u6587\u4ef6\u53ef\u4ee5\u6269\u5c55\u4e3aMETA-INF/dubbo\u3001META-INF/internal\u7b49"),m.a.createElement("pre",null,m.a.createElement("code",null,"@Documented  ",m.a.createElement("br",null),"@Retention(RetentionPolicy.RUNTIME)\xa0\xa0",m.a.createElement("br",null),"@Target(",this.s,"ElementType.TYPE})\xa0\xa0",m.a.createElement("br",null),"public\xa0@interface\xa0SPI\xa0",this.s,"\xa0\xa0",m.a.createElement("br",null),'\xa0\xa0\xa0\xa0String\xa0value()\xa0default\xa0"";\xa0\xa0//\u7f3a\u7701\u6269\u5c55\u70b9\u540d',m.a.createElement("br",null),"}",m.a.createElement("br",null))),m.a.createElement("p",null,"\u793a\u4f8b"),m.a.createElement("pre",null,m.a.createElement("code",null,'@SPI("dubbo")   //\u6269\u5c55\u70b9\u540d\u5b57\u4e3adubbo',m.a.createElement("br",null),"public\xa0interface\xa0Protocol\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0int\xa0getDefaultPort();",m.a.createElement("br",null),"//\u66b4\u9732\u8fdc\u7a0b\u670d\u52a1",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0@Adaptive",m.a.createElement("br",null),"<T>\xa0Exporter<T>\xa0export(Invoker<T>\xa0invoker)\xa0throws\xa0RpcException;",m.a.createElement("br",null),"//\u5f15\u7528\u8fdc\u7a0b\u670d\u52a1",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0@Adaptive",m.a.createElement("br",null),"<T>\xa0Invoker<T>\xa0refer(Class<T>\xa0type,\xa0URL\xa0url)\xa0throws\xa0RpcException;",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0void\xa0destroy();",m.a.createElement("br",null),"}",m.a.createElement("br",null))),m.a.createElement("p",null,"Protocol\u7684\u5b9e\u73b0\u7c7b"),m.a.createElement("p",null,m.a.createElement("img",{src:"https://gitee.com/nick070809/pics/raw/master/dubbo/2.png",alt:""})),m.a.createElement("p",null,"\u53d1\u73b0\u6709\u5f88\u591a\u7684\u5b9e\u73b0\u7c7b,\u662f\u5426\u6709\u88abspi\u7ba1\u7406\u7684\u5b9e\u73b0\u7c7b\u5462?"),m.a.createElement("p",null,m.a.createElement("img",{src:"https://gitee.com/nick070809/pics/raw/master/dubbo/3.png",alt:""})),m.a.createElement("p",null,"\u53c8\u5982\uff1a"),m.a.createElement("pre",null,m.a.createElement("code",null,'@SPI("javassist")//\u53ef\u4ee5\u77e5\u9053\u9ed8\u8ba4\u4f7f\u7528key\u4e3ajavassist\u7684\u52a8\u6001\u7f16\u8bd1\u5b9e\u73b0\u3002',m.a.createElement("br",null),"public\xa0interface\xa0Compiler\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0Class<?>\xa0compile(String\xa0code,\xa0ClassLoader\xa0classLoader);",m.a.createElement("br",null),"}",m.a.createElement("br",null))),m.a.createElement("p",null,m.a.createElement("img",{src:"https://gitee.com/nick070809/pics/raw/master/dubbo/4.png",alt:""})),m.a.createElement("p",null,"\xa0"),m.a.createElement("h2",{id:"\u6e90\u7801\u7bc7"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"\u6e90\u7801\u7bc7")),m.a.createElement("h3",{id:"ExtensionLoader[\u5de5\u5382\u6a21\u5f0f]"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"ExtensionLoader[\u5de5\u5382\u6a21\u5f0f]")),m.a.createElement("pre",null,m.a.createElement("code",null,"private static final Protocol protocol =ExtensionLoader.getExtensionLoader(Protocol.class).getAdaptiveExtension();  ",m.a.createElement("br",null))),m.a.createElement("p",null,"Dubbo\u91cc\u6709\u5f88\u591a\u8fd9\u79cd\u4ee3\u7801\u3002\u8fd9\u4e5f\u662f\u4e00\u79cd\u5de5\u5382\u6a21\u5f0f\uff0c\u53ea\u662f\u5b9e\u73b0\u7c7b\u7684\u83b7\u53d6\u91c7\u7528\u4e86 jdkspi\u7684\u673a\u5236\u3002\u8fd9\u4e48\u5b9e\u73b0\u7684\u4f18\u70b9\u662f\u53ef\u6269\u5c55\u6027\u5f3a\uff0c\u60f3\u8981\u6269\u5c55\u5b9e\u73b0\uff0c\u53ea\u9700\u8981\u5728classpath\u4e0b\u589e\u52a0\u4e2a\u6587\u4ef6\u5c31\u53ef\u4ee5\u4e86\uff0c\u4ee3\u7801\u96f6\u4fb5\u5165\u3002\u53e6\u5916\uff0c\u50cf\u4e0a\u9762\u7684Adaptive\u5b9e\u73b0\uff0c\u53ef\u4ee5\u505a\u5230\u8c03\u7528\u65f6\u52a8\u6001\u51b3\u5b9a\u8c03\u7528\u54ea\u4e2a\u5b9e\u73b0\uff0c\u4f46\u662f\u7531\u4e8e\u8fd9\u79cd\u5b9e\u73b0\u91c7\u7528\u4e86\u52a8\u6001\u4ee3\u7406\uff0c\u4f1a\u9020\u6210\u4ee3\u7801\u8c03\u8bd5\u6bd4\u8f83\u9ebb\u70e6\uff0c\u9700\u8981\u5206\u6790\u51fa\u5b9e\u9645\u8c03\u7528\u7684\u5b9e\u73b0\u7c7b\u3002"),m.a.createElement("p",null,"ExtensionLoader\u6ca1\u6709\u63d0\u4f9bpublic\u7684\u6784\u9020\u65b9\u6cd5,\u4f46\u662f\u63d0\u4f9b\u4e86\u4e00\u4e2apublic static\u7684getExtensionLoader,\u8fd9\u4e2a\u65b9\u6cd5\u5c31\u662f\u83b7\u53d6ExtensionLoader\u5b9e\u4f8b\u7684\u5de5\u5382\u65b9\u6cd5\u3002"),m.a.createElement("pre",null,m.a.createElement("code",null,"public static <T> ExtensionLoader<T> getExtensionLoader(Class<T> type) ",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0if(!type.isInterface())\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0throw\xa0ex;",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0if(!withExtensionAnnotation(type))\xa0",this.s,"\xa0//\xa0\u53ea\u63a5\u53d7\u4f7f\u7528@SPI\u6ce8\u89e3\u6ce8\u91ca\u7684\u63a5\u53e3\u7c7b\u578b",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0throw\xa0ex;",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"\xa0 //\xa0\u5148\u4ece\u9759\u6001\u7f13\u5b58\u4e2d\u83b7\u53d6\u5bf9\u5e94\u7684ExtensionLoader\u5b9e\u4f8b\xa0\xa0EXTENSION_LOADERS\xa0=\xa0concurrentMap",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0ExtensionLoader<T>\xa0loader\xa0=\xa0(ExtensionLoader<T>)\xa0EXTENSION_LOADERS.get(type);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0if\xa0(loader\xa0==\xa0null)\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0EXTENSION_LOADERS.putIfAbsent(type,\xa0new\xa0ExtensionLoader<T>(type));",m.a.createElement("br",null),"//\xa0\u4e3aExtension\u7c7b\u578b\u521b\u5efaExtensionLoader\u5b9e\u4f8b,\u5e76\u653e\u5165\u9759\u6001\u7f13\u5b58",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0loader\xa0=\xa0(ExtensionLoader<T>)\xa0EXTENSION_LOADERS.get(type);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0return\xa0loader;",m.a.createElement("br",null),"}",m.a.createElement("br",null))),m.a.createElement("p",null,"new ExtensionLoader<T>(type):"),m.a.createElement("pre",null,m.a.createElement("code",null," private ExtensionLoader(Class<?> type) ",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0this.type\xa0=\xa0type;",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0objectFactory\xa0=\xa0(type\xa0==\xa0ExtensionFactory.class\xa0?\xa0null\xa0:\xa0ExtensionLoader.getExtensionLoader(ExtensionFactory.class).getAdaptiveExtension());",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0}",m.a.createElement("br",null))),m.a.createElement("h4",{id:"ExtensionLoader.getExtension(type)"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"ExtensionLoader.getExtension(type)")),m.a.createElement("p",null,"\u6839\u636e\u540d\u79f0\u83b7\u53d6\u5f53\u524d\u6269\u5c55\u7684\u6307\u5b9a\u5b9e\u73b0"),m.a.createElement("pre",null,m.a.createElement("code",null," public T getExtension(String name) ",this.s,m.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0if\xa0("true".equals(name))\xa0\xa0return\xa0getDefaultExtension();',m.a.createElement("br",null),"\xa0\xa0",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0Holder<Object>\xa0holder\xa0=\xa0cachedInstances.get(name);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0if\xa0(holder\xa0==\xa0null)\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0cachedInstances.putIfAbsent(name,\xa0new\xa0Holder<Object>());",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0holder\xa0=\xa0cachedInstances.get(name);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0Object\xa0instance\xa0=\xa0holder.get();",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0if\xa0(instance\xa0==\xa0null)\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0synchronized\xa0(holder)\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0instance\xa0=\xa0holder.get();",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0if\xa0(instance\xa0==\xa0null)\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0instance\xa0=\xa0createExtension(name);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0holder.set(instance);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0return\xa0(T)\xa0instance;",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0private\xa0T\xa0createExtension(String\xa0name)\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0Class<?>\xa0clazz\xa0=\xa0getExtensionClasses().get(name);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0//\u6784\u9020\u4e00\u4e2a\u5b9e\u4f8b",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0}",m.a.createElement("br",null))),m.a.createElement("h4",{id:"ExtensionLoader.getActivateExtension(type)"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"ExtensionLoader.getActivateExtension(type)")),m.a.createElement("p",null,"\u6839\u636e\u6761\u4ef6\u83b7\u53d6\u5f53\u524d\u6269\u5c55\u53ef\u81ea\u52a8\u6fc0\u6d3b\u7684\u5b9e\u73b0 "),m.a.createElement("h4",{id:"ExtensionLoader.getAdaptiveExtension(type)"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"ExtensionLoader.getAdaptiveExtension(type)")),m.a.createElement("p",null,"\u83b7\u53d6\u5f53\u524d\u6269\u5c55\u7684\u81ea\u9002\u5e94\u5b9e\u73b0"),m.a.createElement("h3",{id:"AdaptiveExtensionFactory"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"AdaptiveExtensionFactory")),m.a.createElement("p",null,"\u4ece\u4e0a\u9762\u7684\u4ee3\u7801\u6765\u770b,\u5982\u679c\u4f20\u5165\u7684\u53c2\u6570\u4e3aExtensionFactory\u7c7b\u578b\u7684,objectFactory\u4f1a\u8bbe\u7f6e\u4e3anull,\u5426\u5219getAdaptiveExtension();ExtensionFactory objectFactory\u4e3b\u8981\u7528\u4e8e\u52a0\u8f7d\u6269\u5c55\u7684\u5b9e\u73b0"),m.a.createElement("p",null,m.a.createElement("img",{src:"https://gitee.com/nick070809/pics/raw/master/dubbo/5.png",alt:""})),m.a.createElement("p",null,"\u9ed8\u8ba4\u7684ExtensionFactory\u5b9e\u73b0\u4e2d,AdaptiveExtensionFactotry\u88ab@Adaptive\u6ce8\u89e3\u6ce8\u91ca,\u4e5f\u5c31\u662f\u5b83\u5c31\u662fExtensionFactory\u5bf9\u5e94\u7684\u81ea\u9002\u5e94\u6269\u5c55\u5b9e\u73b0(\u6bcf\u4e2a\u6269\u5c55\u70b9\u6700\u591a\u53ea\u80fd\u6709\u4e00\u4e2a\u81ea\u9002\u5e94\u5b9e\u73b0,\u5982\u679c\u6240\u6709\u5b9e\u73b0\u4e2d\u6ca1\u6709\u88ab@Adaptive\u6ce8\u91ca\u7684,\u90a3\u4e48dubbo\u4f1a\u52a8\u6001\u751f\u6210\u4e00\u4e2a\u81ea\u9002\u5e94\u5b9e\u73b0\u7c7b),\u4e5f\u5c31\u662f\u8bf4,\u6240\u6709\u5bf9ExtensionFactory\u8c03\u7528\u7684\u5730\u65b9,\u5b9e\u9645\u4e0a\u8c03\u7528\u7684\u90fd\u662fAdpativeExtensionFactory,\u5f53\u4e8e\u4e00\u4e2a\u4ee3\u7406\u5165\u53e3,\u4ed6\u4f1a\u904d\u5386\u5f53\u524d\u7cfb\u7edf\u4e2d\u6240\u6709\u7684ExtensionFactory\u5b9e\u73b0\u6765\u83b7\u53d6\u6307\u5b9a\u7684\u6269\u5c55\u5b9e\u73b0,\u83b7\u53d6\u5230\u6269\u5c55\u5b9e\u73b0\u6216\u904d\u5386\u5b8c\u6240\u6709\u7684ExtensionFactory\u5b9e\u73b0\u3002\u8fd9\u91cc\u8c03\u7528\u4e86ExtensionLoader\u7684getSupportedExtensions\u65b9\u6cd5\u6765\u83b7\u53d6ExtensionFactory\u7684\u6240\u6709\u5b9e\u73b0,\u53c8\u56de\u5230\u4e86ExtensionLoader\u7c7b,\u4e0b\u9762\u6211\u4eec\u5c31\u6765\u5206\u6790ExtensionLoader\u7684\u51e0\u4e2a\u91cd\u8981\u7684\u5b9e\u4f8b\u65b9\u6cd5\u3002"),m.a.createElement("p",null,"\xa0"),m.a.createElement("p",null,"\u5176public\u6210\u5458\u65b9\u6cd5\u4e2d\u6709\u4e09\u4e2a\u6bd4\u8f83\u91cd\u8981\u7684\u65b9\u6cd5\uff1a"),m.a.createElement("p",null," getActivateExtension \uff1a\u6839\u636e\u6761\u4ef6\u83b7\u53d6\u5f53\u524d\u6269\u5c55\u53ef\u81ea\u52a8\u6fc0\u6d3b\u7684\u5b9e\u73b0"),m.a.createElement("p",null," getExtension \uff1a\u6839\u636e\u540d\u79f0\u83b7\u53d6\u5f53\u524d\u6269\u5c55\u7684\u6307\u5b9a\u5b9e\u73b0"),m.a.createElement("p",null," getAdaptiveExtension : \u83b7\u53d6\u5f53\u524d\u6269\u5c55\u7684\u81ea\u9002\u5e94\u5b9e\u73b0"),m.a.createElement("p",null," \u8fd9\u4e09\u4e2a\u65b9\u6cd5\u5c06\u4f1a\u662f\u6211\u4eec\u91cd\u70b9\u5173\u6ce8\u7684\u65b9\u6cd5\uff1b*\u6bcf\u4e00\u4e2aExtensionLoader\u5b9e\u4f8b\u4ec5\u8d1f\u8d23\u52a0\u8f7d\u7279\u5b9aSPI\u6269\u5c55\u7684\u5b9e\u73b0\u3002\u56e0\u6b64\u60f3\u8981\u83b7\u53d6\u67d0\u4e2a\u6269\u5c55\u7684\u5b9e\u73b0,\u9996\u5148\u8981\u83b7\u53d6\u5230\u8be5\u6269\u5c55\u5bf9\u5e94\u7684ExtensionLoader\u5b9e\u4f8b\u3002"),m.a.createElement("p",null,"\xa0"),m.a.createElement("h3",{id:"\u670d\u52a1\u53d1\u5e03"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"\u670d\u52a1\u53d1\u5e03")),m.a.createElement("p",null,"\u670d\u52a1\u53d1\u5e03\u662f\u670d\u52a1\u63d0\u4f9b\u65b9\u5411\u6ce8\u518c\u4e2d\u6ce8\u518c\u670d\u52a1\u8fc7\u7a0b\uff0c\u4ee5\u4fbf\u670d\u52a1\u6d88\u8d39\u8005\u4ece\u6ce8\u518c\u4e2d\u5fc3\u67e5\u9605\u5e76\u8c03\u7528\u670d\u52a1\u3002"),m.a.createElement("p",null,"\u670d\u52a1\u53d1\u5e03\u65b9\u5728spring\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\u5982\u4e0b\uff1a"),m.a.createElement("p",null,m.a.createElement("bean",{id:"demoService",class:"com.alibaba.dubbo.demo.provider.DemoServiceImpl"})),m.a.createElement("p",null,"\u4e0a\u9762\u662f\u5728spring\u4e2d\u914d\u7f6e\u7684\u670d\u52a1\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u662fspring\u4e2d\u7684\u4e00\u4e2a\u666e\u901a\u7684bean"),m.a.createElement("p",null,'<dubbo:service interface="com.alibaba.dubbo.demo.DemoService" ref=\u201ddemoService\u201d/>'),m.a.createElement("p",null,"\u4e0a\u9762\u7684\u914d\u7f6espring\u5bb9\u5668\u5728\u542f\u52a8\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u89e3\u6790\u81ea\u5b9a\u4e49\u7684schema\u5143\u7d20dubbo\u8f6c\u6362\u6210\u5b9e\u9645\u7684\u914d\u7f6e\u5b9e\u73b0ServiceBean \uff0c\u5e76\u628a\u670d\u52a1\u66b4\u9732\u51fa\u53bb\u3002"),m.a.createElement("p",null,"\u4ecedubbo bean\u7684\u52a0\u8f7d\u4e2d\u77e5\u9053,\u8fd9\u4e2a",m.a.createElement("a",{href:"dubbo:service",target:"_blank"},"dubbo:service"),"\u4f1a\u88ab\u5c01\u88c5\u4e3a\u4e00\u4e2aServiceBean"),m.a.createElement("p",null,'registerBeanDefinitionParser("service", new DubboBeanDefinitionParser(ServiceBean.class, true));'),m.a.createElement("p",null,m.a.createElement("img",{src:"https://gitee.com/nick070809/pics/raw/master/dubbo/6.png",alt:""})),m.a.createElement("p",null,"ServiceBean\u662f\u4e00\u4e2aInitializingBean,\u5728afterPropertiesSet\u65f6\u901a\u8fc7\u914d\u7f6e\u4fe1\u606f\u5f15\u5bfc\u670d\u52a1\u7ed1\u5b9a\u548c\u6ce8\u518c\u3002"),m.a.createElement("p",null,"ServiceBean\u8fd8\u5b9e\u73b0\u4e86ApplicationListener,\u5728\u5168\u90e8spring bean\u52a0\u8f7d\u5b8c\u6210\u540e\u5224\u65ad\u662f\u5426\u5ef6\u8fdf\u52a0\u8f7d\u7684\u903b\u8f91\u3002"),m.a.createElement("p",null,"ServiceBean\u4e5f\u5b9e\u73b0\u4e86ApplicationContextAware,\u590d\u5199\u4e86setApplicationContext\u65b9\u6cd5,\u6dfb\u52a0\u5bb9\u5668\u7684\u7ba1\u7406\u3002"),m.a.createElement("p",null,"ServiceConfig,\u505a\u4e3a\u670d\u52a1\u914d\u7f6e\u7ba1\u7406\u548c\u914d\u7f6e\u4fe1\u606f\u6821\u9a8c\u3002"),m.a.createElement("p",null,"\xa0"),m.a.createElement("h3",{id:"spring\u5404\u4e2a\u542f\u52a8\u65b9\u6cd5\u6267\u884c\u987a\u5e8f\uff1a"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"spring\u5404\u4e2a\u542f\u52a8\u65b9\u6cd5\u6267\u884c\u987a\u5e8f\uff1a")),m.a.createElement("p",null,"constructor,@PostConstruct,afterPropertiesSet,onApplicationEvent, init-method\u6267\u884c\u987a\u5e8f"),m.a.createElement("p",null,"\u6267\u884c\u7ed3\u679c\uff1a"),m.a.createElement("pre",null,m.a.createElement("code",null,"----\x3e InitSequenceBean: constructor: ",m.a.createElement("br",null),"----\x3e\xa0InitSequenceBean:\xa0postConstruct:\xa0",m.a.createElement("br",null),"----\x3e\xa0InitSequenceBean:\xa0afterPropertiesSet:\xa0",m.a.createElement("br",null),"----\x3e\xa0InitSequenceBean:\xa0init:\xa0",m.a.createElement("br",null),"----\x3e\xa0InitSequenceBean:\xa0onApplicationEvent",m.a.createElement("br",null),"----\x3e\xa0InitSequenceBean:\xa0constructor:\xa0",m.a.createElement("br",null),"----\x3e\xa0InitSequenceBean:\xa0afterPropertiesSet:\xa0",m.a.createElement("br",null),"----\x3e\xa0InitSequenceBean:\xa0init:\xa0",m.a.createElement("br",null),"----\x3e\xa0InitSequenceBean:\xa0onApplicationEvent",m.a.createElement("br",null))),m.a.createElement("p",null,"\u5206\u6790\uff1a"),m.a.createElement("p",null,"\u6784\u9020\u51fd\u6570\u662f\u6bcf\u4e2a\u7c7b\u6700\u5148\u6267\u884c\u7684,\u8fd9\u4e2a\u65f6\u5019,bean\u5c5e\u6027\u8fd8\u6ca1\u6709\u88ab\u6ce8\u5165"),m.a.createElement("p",null,"postConstruct\u4f18\u5148\u4e8eafterPropertiesSet\u6267\u884c"),m.a.createElement("p",null,"spring\u5f88\u591a\u7ec4\u5efa\u7684\u521d\u59cb\u5316\u90fd\u653e\u5728afterPropertiesSet\u505a\u3002\u6211\u4eec\u5728\u505a\u4e00\u4e9b\u4e2d\u95f4\u4ef6\u60f3\u548cspring\u4e00\u8d77\u542f\u52a8,\u53ef\u4ee5\u653e\u5728\u8fd9\u91cc\u542f\u52a8\u3002"),m.a.createElement("p",null,"onApplicationEvent\u5c5e\u4e8e\u5e94\u7528\u5c42\u7684\u65f6\u95f4,\u6700\u540e\u88ab\u6267\u884c,\u5f88\u5bb9\u6613\u7406\u89e3\u3002\u6ce8\u610f,\u5b83\u51fa\u73b0\u4e86\u4e24\u6b21,\u4e3a\u4ec0\u4e48\uff1f\u56e0\u4e3abean\u6ce8\u5165\u4e86DemoService,spring\u5bb9\u5668\u4f1a\u88ab\u5237\u65b0\u3002"),m.a.createElement("p",null,"\u6362\u8a00\u4e4bonApplicationEvent\u4f1a\u88ab\u9891\u7e41\u6267\u884c,\u9700\u8981\u4f7f\u7528\u5b83\u76d1\u542c,\u9700\u8981\u8003\u8651\u6027\u80fd\u95ee\u9898\u3002"),m.a.createElement("p",null,"\xa0"),m.a.createElement("h3",{id:"RegistryProtocol"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"RegistryProtocol")),m.a.createElement("p",null,'<dubbo:registry protocol="zookeeper" address="$',this.s,'dubbo.registry.address}" />'),m.a.createElement("pre",null,m.a.createElement("code",null,"public static RegistryProtocol getRegistryProtocol() ",this.s,m.a.createElement("br",null),"...",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0return\xa0ExtensionLoader.getExtensionLoader(Protocol.class).getExtension(Constants.REGISTRY_PROTOCO\xa0",m.a.createElement("br",null),'}\xa0//REGISTRY_PROTOCO\xa0="registry";',m.a.createElement("br",null))),m.a.createElement("p",null,"RegistryFactory:"),m.a.createElement("pre",null,m.a.createElement("code",null,"private RegistryFactory registryFactory;",m.a.createElement("br",null),"public\xa0void\xa0setRegistryFactory(RegistryFactory\xa0registryFactory)\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0this.registryFactory\xa0=\xa0registryFactory;",m.a.createElement("br",null),"}",m.a.createElement("br",null),"public\xa0void\xa0register(URL\xa0registryUrl,\xa0URL\xa0registedProviderUrl)\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0Registry\xa0registry\xa0=\xa0registryFactory.getRegistry(registryUrl);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0registry.register(registedProviderUrl);",m.a.createElement("br",null),"}",m.a.createElement("br",null))),m.a.createElement("p",null,m.a.createElement("img",{src:"https://gitee.com/nick070809/pics/raw/master/dubbo/7.png",alt:""})),m.a.createElement("p",null,"\u901a\u8fc7\u4f20\u5165\u7684registryFactory\uff0c\u89e3\u6790registryUrl\u6765\u83b7\u53d6\u4e0d\u540c\u7684Registry,\u53ef\u80fd\u662fZookeeperRegistry\uff0c\u7136\u540e\u8c03\u7528register\u65b9\u6cd5\u8fdb\u884c\u6ce8\u518c\uff0c\u5728ZookeeperRegistry\u4e2d\u4f1a\u8c03\u7528ZookeeperClient.create\u65b9\u6cd5\u6765\u5b8c\u6210\u6ce8\u518c\u3002"),m.a.createElement("h3",{id:"DubboProtocol\u66b4\u9732\u670d\u52a1\u7684\u8fc7\u7a0b"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"DubboProtocol\u66b4\u9732\u670d\u52a1\u7684\u8fc7\u7a0b")),m.a.createElement("p",null,'<dubbo:protocol name="$',this.s,'dubbo.protocol.name}" port="$',this.s,'dubbo.protocol.port}" />'),m.a.createElement("pre",null,m.a.createElement("code",null,"  public static DubboProtocol getDubboProtocol() ",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0return\xa0ExtensionLoader.getExtensionLoader(Protocol.class).getExtension(DubboProtocol.NAME);",m.a.createElement("br",null),'\xa0\xa0\xa0\xa0}//DubboProtocol.NAME\xa0="dubbo"',m.a.createElement("br",null))),m.a.createElement("p",null,"\u66b4\u9732\u7ed9\u6ce8\u518c\u4e2d\u5fc3\uff1a"),m.a.createElement("pre",null,m.a.createElement("code",null," public <T> Exporter<T> export(Invoker<T> invoker) throws RpcException ",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0URL\xa0url\xa0=\xa0invoker.getUrl();",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0DubboExporter<T>\xa0exporter\xa0=\xa0new\xa0DubboExporter<T>(invoker,\xa0key,\xa0exporterMap);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0exporterMap.put(key,\xa0exporter);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0openServer(url);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0optimizeSerialization(url);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0return\xa0exporter;",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0}",m.a.createElement("br",null))),m.a.createElement("p",null,"\u83b7\u53d6invoker:"),m.a.createElement("pre",null,m.a.createElement("code",null," exporterMap = new ConcurrentHashMap<String, Exporter<?>>();",m.a.createElement("br",null),"\xa0Invoker<?>\xa0getInvoker(Channel\xa0channel,\xa0Invocation\xa0inv)\xa0throws\xa0RemotingException\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0DubboExporter<?>\xa0exporter\xa0=\xa0(DubboExporter<?>)\xa0exporterMap.get(serviceKey);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0return\xa0exporter.getInvoker();",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0}",m.a.createElement("br",null))),m.a.createElement("p",null,"invoker\u662f\u5728\u670d\u52a1\u66b4\u9732\u65f6\u521b\u5efa\u7684\uff1a"),m.a.createElement("p",null,"\u5982\uff1a"),m.a.createElement("pre",null,m.a.createElement("code",null,"Exporter<HessianService> exporter = protocol.export(proxyFactory.getInvoker(server, HessianService.class, url));",m.a.createElement("br",null))),m.a.createElement("p",null,"\xa0"),m.a.createElement("p",null,"\xa0"),m.a.createElement("h3",{id:"dubbo-remote"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"dubbo-remote")),m.a.createElement("p",null,m.a.createElement("img",{src:"https://gitee.com/nick070809/pics/raw/master/dubbo/8.png",alt:""})),m.a.createElement("h3",{id:"dubbo-rpc"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"dubbo-rpc")),m.a.createElement("p",null,m.a.createElement("img",{src:"https://gitee.com/nick070809/pics/raw/master/dubbo/9.png",alt:""})),m.a.createElement("h3",{id:"Proxy"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"Proxy")),m.a.createElement("pre",null,m.a.createElement("code",null,"|-dubbo-rpc",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0|-dubbo-rpc-api",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0|-proxy",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 |-JavassistProxyFactory",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 |-JdkProxyFactory",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0|-protocol",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 |-AbstractProtocol",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0  |--DubboProtocol",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0  |--HttpProtocol",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0  |--\xa0...",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0|-filter",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0|-listener",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0|-Invoker",m.a.createElement("br",null))),m.a.createElement("p",null,"JavassistProxyFactory:"),m.a.createElement("pre",null,m.a.createElement("code",null,"public class JavassistProxyFactory extends AbstractProxyFactory ",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0public\xa0<T>\xa0T\xa0getProxy(Invoker<T>\xa0invoker,\xa0Class<?>[]\xa0interfaces)\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0return\xa0(T)\xa0Proxy.getProxy(interfaces).newInstance(new\xa0InvokerInvocationHandler(invoker));",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0public\xa0<T>\xa0Invoker<T>\xa0getInvoker(T\xa0proxy,\xa0Class<T>\xa0type,\xa0URL\xa0url)\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0final\xa0Wrapper\xa0wrapper\xa0=\xa0Wrapper.getWrapper(proxy.getClass().getName().indexOf('$')\xa0<\xa00\xa0?\xa0proxy.getClass()\xa0:\xa0type);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0return\xa0new\xa0AbstractProxyInvoker<T>(proxy,\xa0type,\xa0url)\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0@Override",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0protected\xa0Object\xa0doInvoke(T\xa0proxy,\xa0String\xa0methodName,",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0Class<?>[]\xa0parameterTypes,",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0Object[]\xa0arguments)\xa0throws\xa0Throwable\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0return\xa0wrapper.invokeMethod(proxy,\xa0methodName,\xa0parameterTypes,\xa0arguments);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0};",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"}",m.a.createElement("br",null))),m.a.createElement("p",null,"\u670d\u52a1\u4ee3\u7406\u5c42\uff08Proxy\uff09\uff1a\u5bf9\u670d\u52a1\u63a5\u53e3\u8fdb\u884c\u900f\u660e\u4ee3\u7406\uff0c",m.a.createElement("strong",null,"\u751f\u6210\u670d\u52a1\u7684\u5ba2\u6237\u7aef\u4ee3\u7406\u548c\u670d\u52a1\u5668\u7aef\u4ee3\u7406"),"\uff0c\u4f7f\u670d\u52a1\u7684\u8fdc\u7a0b\u8c03\u7528\u5c31\u50cf\u5728\u672c\u5730\u8c03\u7528\u4e00\u6837\u3002",m.a.createElement("strong",null,"\u9ed8\u8ba4\u4f7f\u7528JavassistProxyFactory\uff0c\u8fd4\u56de\u4e00\u4e2aInvoker\uff0cInvoker\u5219\u662f\u4e2a\u53ef\u6267\u884c\u6838\u5fc3\u5b9e\u4f53\uff0cInvoker\u7684invoke\u65b9\u6cd5\u901a\u8fc7\u53cd\u5c04\u6267\u884cservice\u65b9\u6cd5\u3002")),m.a.createElement("p",null,"\u8fdc\u7a0b\u8c03\u7528\u5c42\uff08Protocol\uff09\uff1a\u5c01\u88c5RPC\u8c03\u7528\uff0cprovider\u901a\u8fc7export\u65b9\u6cd5\u8fdb\u884c\u66b4\u9732\u670d\u52a1\uff0cconsumer\u901a\u8fc7refer\u65b9\u6cd5\u8c03\u7528\u670d\u52a1\u3002\u800cProtocol\u4f9d\u8d56\u7684\u662fInvoker\u3002\u901a\u8fc7\u4e0a\u9762\u8bf4\u7684Proxy\u83b7\u5f97\u7684Invoker\uff0c\u5305\u88c5\u6210Exporter"),m.a.createElement("h3",{id:"Invoker\uff1a"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"Invoker\uff1a")),m.a.createElement("pre",null,m.a.createElement("code",null,"public interface Invoker<T> extends Node ",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0Class<T>\xa0getInterface();",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0Result\xa0invoke(Invocation\xa0invocation)\xa0throws\xa0RpcException;",m.a.createElement("br",null),"}",m.a.createElement("br",null))),m.a.createElement("h3",{id:"ServiceBean"},m.a.createElement("a",{href:"javascript:void(0)",class:"anchor"},"ServiceBean")),m.a.createElement("pre",null,m.a.createElement("code",null,"|-dubbo-config",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0|-dubbo-config-api",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0 |-ServiceConfig",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0 |-RegistryConfig",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0 |-ProviderConfig",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0 |-ProtocolConfig",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0 |-MonitorConfig",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0 |-ConsumerConfig",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0 |-ServiceConfig",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0|-dubbo-config-spring",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0|-ServiceBean",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0|-ReferenceBean\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",m.a.createElement("br",null))),m.a.createElement("p",null,"\u524d\u9762\u8bb2\u8fc7\u6bcf\u4e2a\u6807\u7b7e\u90fd\u4f1a\u89e3\u6790\u6210\u4e00\u4e2aServiceBean\uff0c\u5728ServiceBean\u7684onApplicationEvent\u548cafterPropertiesSet\u65b9\u6cd5\u4e2d\uff0c\u90fd\u542b\u6709export\u65b9\u6cd5\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u6bcf\u4e00\u4e2aServiceBean\u90fd\u4f1a\u8fdb\u884c\u66b4\u9732\uff1b"),m.a.createElement("pre",null,m.a.createElement("code",null,"public void onApplicationEvent(ContextRefreshedEvent event) ",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0if\xa0(isDelay()\xa0&&\xa0!isExported()\xa0&&\xa0!isUnexported())\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0export();",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"}",m.a.createElement("br",null),"public\xa0void\xa0afterPropertiesSet()\xa0throws\xa0Exception\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0getProvider();\xa0\xa0//\u4f2a\u4ee3\u7801",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0getApplication();",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0getModule();",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0getRegistries();",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0getMonitor()",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0getProtocols();",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0getBeanName();",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0if\xa0(!isDelay())\xa0export\xa0\xa0();",m.a.createElement("br",null),"}",m.a.createElement("br",null))),m.a.createElement("p",null,"\u6267\u884cexport\u5728\u7236\u7c7bServiceConfig\u4e2d\uff1a"),m.a.createElement("pre",null,m.a.createElement("code",null,"public synchronized void export() ",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0if\xa0(delay\xa0!=\xa0null\xa0&&\xa0delay\xa0>\xa00)\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0delayExportExecutor.schedule(new\xa0Runnable()\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0public\xa0void\xa0run()\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0doExport();\xa0\xa0//\u5ef6\u8fdf\u66b4\u9732",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0},\xa0delay,\xa0TimeUnit.MILLISECONDS);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0}\xa0else\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0doExport();",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"}",m.a.createElement("br",null),"protected\xa0synchronized\xa0void\xa0doExport()\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0...",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0doExportUrls();",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0...",m.a.createElement("br",null),"}",m.a.createElement("br",null),"private\xa0void\xa0doExportUrls()\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0//\u8be5\u65b9\u6cd5\u6839\u636e\u914d\u7f6e\u6587\u4ef6\u88c5\u914d\u6210\u4e00\u4e2a\u6ce8\u518c\u5730URL\u7684list",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0List<URL>\xa0registryURLs\xa0=\xa0loadRegistries(true);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0//\u6839\u636e\u6bcf\u4e00\u4e2a\u534f\u8bae\u914d\u7f6e\u6765\u5206\u522b\u66b4\u9732\u670d\u52a1",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0for\xa0(ProtocolConfig\xa0protocolConfig\xa0:\xa0protocols)\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0doExportUrlsFor1Protocol(protocolConfig,\xa0registryURLs);",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0}",m.a.createElement("br",null))),m.a.createElement("p",null,'\u8fd9\u4e2aprotocols\u957f\u8fd9\u4e2a\u6837\u5b50<dubbo:protocol name="dubbo" port="20888" id="dubbo" /> protocols\u4e5f\u662f\u6839\u636e\u914d\u7f6e\u88c5\u914d\u51fa\u6765\u7684\u3002\u63a5\u4e0b\u6765\u8ba9\u6211\u4eec\u8fdb\u5165doExportUrlsFor1Protocol\u65b9\u6cd5\u770b\u770bdubbo\u5177\u4f53\u662f\u600e\u4e48\u6837\u5c06\u670d\u52a1\u66b4\u9732\u51fa\u53bb\u7684\u3002\u8fd9\u4e2a\u65b9\u6cd5\u7279\u522b\u5927\uff0c\u6709\u5c06\u8fd1300\u591a\u884c\u4ee3\u7801\uff0c\u4f46\u662f\u5176\u4e2d\u5927\u90e8\u5206\u90fd\u662f\u83b7\u53d6\u7c7b\u4f3cprotocols\u7684name\u3001port\u3001host\u548c\u4e00\u4e9b\u5fc5\u8981\u7684\u4e0a\u4e0b\u6587\uff0c\u4ee3\u7801\u592a\u957f\u5c31\u4e0d\u5168\u90fd\u8d34\u51fa\u6765\u4e86\uff0c\u53ea\u8d34\u5173\u952e\u90e8\u5206\u3002'),m.a.createElement("pre",null,m.a.createElement("code",null,"public void setRef(T ref) ",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0this.ref\xa0=\xa0ref;",m.a.createElement("br",null),"\xa0\xa0}",m.a.createElement("br",null),"private\xa0void\xa0doExportUrlsFor1Protocol(ProtocolConfig\xa0protocolConfig,\xa0List<URL>\xa0registryURLs)\xa0",this.s,"\xa0",m.a.createElement("br",null),"...",m.a.createElement("br",null),"//\u901a\u8fc7interfaceClass\u83b7\u53d6\u8981\u66b4\u9732\u670d\u52a1\u7684\u6240\u6709\u8981\u66b4\u9732\u7684\u65b9\u6cd5",m.a.createElement("br",null),"String[]\xa0methods\xa0=\xa0Wrapper.getWrapper(interfaceClass).getMethodNames();",m.a.createElement("br",null),"...",m.a.createElement("br",null),"//\u6839\u636e\u4e0a\u4e0b\u6587\u521b\u5efaURL\u5bf9\u8c61",m.a.createElement("br",null),'\xa0URL\xa0url\xa0=\xa0new\xa0URL(name,\xa0host,\xa0port,\xa0(contextPath\xa0==\xa0null\xa0||\xa0contextPath.length()\xa0==\xa00\xa0?\xa0""\xa0:\xa0contextPath\xa0+\xa0"/")\xa0+\xa0path,\xa0map);',m.a.createElement("br",null),"//\u901a\u8fc7proxyFactory\u6765\u83b7\u53d6Invoker\u5bf9\u8c61",m.a.createElement("br",null),"\xa0Invoker<?>\xa0invoker\xa0=\xa0proxyFactory.getInvoker(ref,\xa0(Class)\xa0interfaceClass,\xa0registryURL.addParameterAndEncoded(Constants.EXPORT_KEY,\xa0url.toFullString()));",m.a.createElement("br",null),"//\u5c06invoker\u5bf9\u8c61\u5728protocol\u4e2d\u5c01\u88c5\u6210Exporter\u65b9\u4fbf\u63d0\u4f9b\u7ed9\u4fe1\u606f\u4ea4\u6362\u5c42\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93",m.a.createElement("br",null),"\xa0Exporter<?>\xa0exporter\xa0=\xa0protocol.export(invoker);",m.a.createElement("br",null),"\xa0//\u5c06exporter\u6dfb\u52a0\u5230list\u4e2d",m.a.createElement("br",null),"\xa0exporters.add(exporter);",m.a.createElement("br",null))),m.a.createElement("p",null,"\u770b\u5230\u8fd9\u91cc\u5c31\u6bd4\u8f83\u660e\u767ddubbo\u7684\u5de5\u4f5c\u539f\u7406\u4e86doExportUrlsFor1Protocol\u65b9\u6cd5\uff0c\u5148\u521b\u5efaURL\uff0cURL\u521b\u5efa\u51fa\u6765\u957f\u8fd9\u6837dubbo://192.168.xx.63:20888/com.xxx.xxx.VehicleInfoService?anyhost=true&application=test-web&default.retries=0&dubbo=2.5.3&interface=com.xxx.xxx.VehicleInfoService&methods=get,save,update,del,list&pid=13168&revision=1.2.38&side=provider&timeout=5000&timestamp=1510829644847;"),m.a.createElement("p",null,"\u662f\u4e0d\u662f\u89c9\u5f97\u8fd9\u4e2aURL\u5f88\u773c\u719f\uff0c\u6ca1\u9519\u5728\u6ce8\u518c\u4e2d\u5fc3\u770b\u5230\u7684services\u7684providers\u4fe1\u606f\u5c31\u662f\u8fd9\u4e2a\uff0c\u518d\u4f20\u5165url\u901a\u8fc7proxyFactory\u83b7\u53d6Invoker\uff0c\u518d\u5c06Invoker\u5c01\u88c5\u6210Exporter\u7684\u6570\u7ec4\uff0c\u53ea\u9700\u8981\u5c06\u8fd9\u4e2alist\u63d0\u4f9b\u7ed9\u7f51\u7edc\u4f20\u8f93\u5c42\u7ec4\u4ef6\uff0c\u7136\u540econsumer\u6267\u884cInvoker\u7684invoke\u65b9\u6cd5\u5c31\u884c\u4e86\u3002\u8ba9\u6211\u4eec\u518d\u770b\u770b\u8fd9\u4e2aproxyFactory\u7684getInvoker\u65b9\u6cd5\u3002proxyFactory\u4e0b\u6709JDKProxyFactory\u548cJavassistProxyFactory\u3002\u5b98\u65b9\u63a8\u8350\u4e5f\u662f\u9ed8\u8ba4\u4f7f\u7528\u7684\u662fJavassistProxyFactory\u3002\u56e0\u4e3ajavassist\u52a8\u6001\u4ee3\u7406\u6027\u80fd\u6bd4JDK\u7684\u9ad8\u3002"),m.a.createElement("p",null,"\xa0"),m.a.createElement("p",null,"\u5728\u524d\u9762\u7684Invoker\u4e2d\u6709\u4e24\u4e2a\u65b9\u6cd5\uff0c\u4e00\u4e2agetInterface\uff0c\u4e5f\u5c31\u662f\u8981\u66b4\u9732\u7684\u670d\u52a1\u63a5\u53e3\uff0c\u4e00\u4e2a\u5c31\u662finvoke\u65b9\u6cd5\uff0c\u8fd9\u4e2ainvoke\u65b9\u6cd5\u5728AbstractProxyInvoker\u4e2d\u662f\u8fd9\u6837\u7684\uff1a"),m.a.createElement("pre",null,m.a.createElement("code",null,"public Result invoke(Invocation invocation) throws RpcException ",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0try\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0//\u8c03\u7528doInvoke\u65b9\u6cd5\uff0c\u8fd4\u56de\u4e00\u4e2aResult",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0return\xa0new\xa0RpcResult(doInvoke(proxy,\xa0invocation.getMethodName(),\xa0invocation.getParameterTypes(),\xa0invocation.getArguments()));",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}\xa0catch\xa0(InvocationTargetException\xa0e)\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0return\xa0new\xa0RpcResult(e.getTargetException());",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}\xa0catch\xa0(Throwable\xa0e)\xa0",this.s,m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0...",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}",m.a.createElement("br",null),"\xa0\xa0\xa0\xa0}",m.a.createElement("br",null))),m.a.createElement("p",null,m.a.createElement("img",{src:"https://gitee.com/nick070809/pics/raw/master/dubbo/10.png",alt:""}))),m.a.createElement(o.a,{span:1}),m.a.createElement(o.a,{span:4},m.a.createElement(i.a,{showInkInFixed:"true"},m.a.createElement(E,{href:"#Dubbo\u6e90\u7801\u7684\u7ed3\u6784\u6982\u8ff0",title:"Dubbo\u6e90\u7801\u7684\u7ed3\u6784\u6982\u8ff0"}),m.a.createElement(E,{href:"#\u8bbe\u8ba1\u7bc7",title:"\u8bbe\u8ba1\u7bc7"},m.a.createElement(E,{href:"#\u81ea\u5b9a\u4e49\u914d\u7f6e\u652f\u6301",title:"\u81ea\u5b9a\u4e49\u914d\u7f6e\u652f\u6301"}),m.a.createElement(E,{href:"#Dubbo bean\u7684\u52a0\u8f7d",title:"Dubbo bean\u7684\u52a0\u8f7d"}),m.a.createElement(E,{href:"#NamespaceHandler",title:"NamespaceHandler"}),m.a.createElement(E,{href:"#DubboBeanDefinitionParser",title:"DubboBeanDefinitionParser"})),m.a.createElement(E,{href:"#Dubbo\u5185\u6838\u5b9e\u73b0\u4e4bSPI",title:"Dubbo\u5185\u6838\u5b9e\u73b0\u4e4bSPI"},m.a.createElement(E,{href:"#ServiceLoader",title:"ServiceLoader"})),m.a.createElement(E,{href:"#\u6e90\u7801\u7bc7",title:"\u6e90\u7801\u7bc7"},m.a.createElement(E,{href:"#ExtensionLoader[\u5de5\u5382\u6a21\u5f0f]",title:"ExtensionLoader[\u5de5\u5382\u6a21\u5f0f]"},m.a.createElement(E,{href:"#ExtensionLoader.getExtension(type)",title:"ExtensionLoader.getExtension(type)"}),m.a.createElement(E,{href:"#ExtensionLoader.getActivateExtension(type)",title:"ExtensionLoader.getActivateExtension(type)"}),m.a.createElement(E,{href:"#ExtensionLoader.getAdaptiveExtension(type)",title:"ExtensionLoader.getAdaptiveExtension(type)"})),m.a.createElement(E,{href:"#AdaptiveExtensionFactory",title:"AdaptiveExtensionFactory"}),m.a.createElement(E,{href:"#\u670d\u52a1\u53d1\u5e03",title:"\u670d\u52a1\u53d1\u5e03"}),m.a.createElement(E,{href:"#spring\u5404\u4e2a\u542f\u52a8\u65b9\u6cd5\u6267\u884c\u987a\u5e8f\uff1a",title:"spring\u5404\u4e2a\u542f\u52a8\u65b9\u6cd5\u6267\u884c\u987a\u5e8f\uff1a"}),m.a.createElement(E,{href:"#RegistryProtocol",title:"RegistryProtocol"}),m.a.createElement(E,{href:"#DubboProtocol\u66b4\u9732\u670d\u52a1\u7684\u8fc7\u7a0b",title:"DubboProtocol\u66b4\u9732\u670d\u52a1\u7684\u8fc7\u7a0b"}),m.a.createElement(E,{href:"#dubbo-remote",title:"dubbo-remote"}),m.a.createElement(E,{href:"#dubbo-rpc",title:"dubbo-rpc"}),m.a.createElement(E,{href:"#Proxy",title:"Proxy"}),m.a.createElement(E,{href:"#Invoker\uff1a",title:"Invoker\uff1a"}),m.a.createElement(E,{href:"#ServiceBean",title:"ServiceBean"}))))))}}]),t}(s.Component);t.default=p}});
//# sourceMappingURL=103.9143f803.chunk.js.map